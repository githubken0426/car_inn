<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="inn.shopping.api.dao.OrderMapper">

	<sql id="Base_Column_List">
		id, user_id, order_no, order_status, order_time, pay_time, item_count, total_amount, payment,
		logistics_fee,address_id, logistics_id,pay_channel,escrow_trade_no,customer_mark
	</sql>

	<select id="selectByPrimaryKey" resultType="inn.shopping.api.entity.Order" parameterType="java.lang.String">
		select
		<include refid="Base_Column_List" />
		from inn_order
		where id = #{id,jdbcType=VARCHAR}
	</select>

	<!-- 获取用户订单列表 -->
	<select id="selectOrderByUserId" resultType="inn.shopping.api.entity.Order" parameterType="java.lang.String">
		select <include refid="Base_Column_List" />
		from inn_order
		<where>
			user_id = #{userId,jdbcType=VARCHAR}
		</where>
	</select>

	<!-- 插入 -->
	<insert id="insert" parameterType="inn.shopping.api.entity.Order">
		insert into inn_order
		(id, user_id, order_no, order_status, order_time, pay_time, item_count, total_amount, payment,
		logistics_fee,address_id, logistics_id,pay_channel,escrow_trade_no,customer_mark)
		values 
		(#{id,jdbcType=VARCHAR}, #{userId,jdbcType=VARCHAR},#{orderNo,jdbcType=VARCHAR},#{orderStatus,jdbcType=VARCHAR}, 
		now(), #{payTime,jdbcType=VARCHAR},#{itemCount,jdbcType=CHAR}, #{totalAmount,jdbcType=VARCHAR},
		#{payment,jdbcType=VARCHAR},#{logisticsFee,jdbcType=VARCHAR},#{addressId,jdbcType=VARCHAR}, 
		#{logisticsId,jdbcType=VARCHAR},#{payChannel,jdbcType=VARCHAR}, #{escrowTradeNo,jdbcType=VARCHAR},
		#{customerMark,jdbcType=VARCHAR})
	</insert>

	<!-- 修改 -->
	<update id="updateByPrimaryKey" parameterType="inn.shopping.api.entity.Order">
		update inn_order
		set
		pay_time = now()
		where id = #{id,jdbcType=VARCHAR}
	</update>
	
</mapper>